# AnomaLens 3.0 - Фронтенд

Фронтенд-приложение для системы обнаружения аномалий AnomaLens 3.0, построенное с использованием React, TypeScript и Material UI 7.

## Особенности интерфейса

### Главный интерфейс
- Современный, отзывчивый интерфейс с использованием Material UI 7
- Навигационное меню с четкой индикацией текущего раздела
- Адаптивный дизайн для различных устройств

### Многоуровневая система обнаружения аномалий
- Интерактивная страница с визуализацией статуса системы
- Пошаговый интерфейс с индикацией уровней обученности детекторов
- Вкладки для удобной навигации между компонентами:
  - Статус системы - визуализация общей готовности и состояния детекторов
  - Обнаружение аномалий - настройка параметров и запуск детекции
  - Результаты - подробная статистика по выполненной детекции

### Форма настройки детекции
- Интуитивный интерфейс с основными и расширенными настройками
- Слайдеры для настройки чувствительности системы
- Информационные подсказки для помощи пользователю
- Наглядное отображение результатов после выполнения

### История аномалий
- Таблица с полной информацией об обнаруженных аномалиях
- Пагинация для удобного просмотра больших объемов данных
- Фильтрация и сортировка результатов

## Технологии

Проект использует следующие основные технологии:
- React 19
- TypeScript
- Material UI 7
- React Router 7
- Vite для сборки проекта
- Axios для работы с API

## Начало работы

### Установка
```bash
npm install
```

### Разработка
```bash
npm run dev
```

### Сборка для production
```bash
npm run build
```

## Структура проекта

- `/src` - Исходный код приложения
  - `/components` - Многоразовые компоненты UI
  - `/layouts` - Компоненты макета страниц
  - `/pages` - Страницы приложения
  - `/services` - Сервисы для работы с API
  - `/types` - TypeScript типы и интерфейсы
  - `/theme` - Настройки темы Material UI

## Особенности реализации

- Полная поддержка пагинации в API и интерфейсе
- Современный компонентный подход с использованием React Hooks
- Типизация всех компонентов и данных с помощью TypeScript
- Интеграция с REST API AnomaLens 3.0

## Архитектура

Проект построен с использованием следующих технологий:

- **React**: Библиотека для построения пользовательских интерфейсов
- **TypeScript**: Типизированный JavaScript для повышения надежности кода
- **Vite**: Быстрый инструмент сборки для современных веб-приложений
- **Material UI**: Библиотека компонентов для создания современного и отзывчивого UI
- **MUI X Data Grid**: Для отображения табличных данных с пагинацией и фильтрацией
- **Axios**: Для HTTP-запросов к API бэкенда

### Структура проекта

```
frontend/
├── public/              # Статические файлы
├── src/                 # Исходный код
│   ├── assets/          # Изображения, иконки и другие статические ресурсы
│   ├── components/      # Переиспользуемые компоненты
│   ├── contexts/        # React контексты для управления состоянием
│   ├── hooks/           # Пользовательские React хуки
│   ├── layouts/         # Компоненты-макеты страниц
│   ├── pages/           # Компоненты страниц
│   ├── services/        # Сервисы для работы с API
│   ├── theme/           # Настройки темы Material UI
│   ├── types/           # TypeScript типы и интерфейсы
│   ├── utils/           # Вспомогательные функции
│   ├── App.tsx          # Корневой компонент приложения
│   ├── main.tsx         # Точка входа в приложение
│   └── index.css        # Глобальные стили
├── package.json         # Зависимости и скрипты
└── vite.config.ts       # Конфигурация Vite
```

## Ключевые компоненты

### Страницы (pages/)

- **ModelOverviewPage**: Обзор моделей детекции аномалий, их статуса и управления ими
- **AnomalyHistoryPage**: История обнаруженных аномалий с фильтрацией и визуализацией
- **TaskStatusPage**: Мониторинг выполнения фоновых задач (обучение, детекция)
- **NotFoundPage**: Страница 404 для ненайденных маршрутов

### Компоненты (components/)

- **AnomalyTable**: Таблица для отображения списка аномалий с пагинацией
- **AnomalyCard**: Карточка для отображения краткой информации об аномалии
- **AnomalyDetailView**: Детальное представление аномалии с контекстной информацией
- **AnomalyCharts**: Графики и диаграммы для визуализации аномалий
- **ModelCard**: Карточка с информацией о модели обнаружения аномалий
- **ScoreChip**: Компонент для визуализации оценки аномальности
- **TaskMonitor**: Компонент для отображения статуса задачи

## Интеграция с API

Приложение взаимодействует с бэкендом через REST API. Основные эндпоинты:

### 1. Аномалии

- `GET /api/anomalies/`: Получение списка аномалий с пагинацией
  ```typescript
  // Ответ имеет формат:
  {
    total: number;    // Общее количество записей
    items: Anomaly[]; // Массив элементов на текущей странице
  }
  ```

- `GET /api/anomalies/{anomaly_id}`: Получение детальной информации об аномалии
- `GET /api/anomalies/{anomaly_id}/context`: Получение контекста аномалии (детали заказа)
- `POST /api/anomalies/train`: Запуск обучения модели
- `POST /api/anomalies/detect`: Запуск детекции аномалий конкретной моделью
- `POST /api/anomalies/detect/ensemble`: Запуск детекции аномалий ансамблем моделей
- `GET /api/anomalies/models/status`: Получение статуса моделей ансамбля
- `GET /api/anomalies/task_status/{task_id}`: Проверка статуса фоновой задачи

### 2. Многоуровневая система

- `GET /api/multilevel/status`: Получение статуса обученности многоуровневой системы
- `GET /api/multilevel/config`: Получение текущей конфигурации многоуровневой системы
- `POST /api/multilevel/config`: Обновление конфигурации многоуровневой системы
- `POST /api/multilevel/train`: Запуск обучения многоуровневой системы
- `POST /api/multilevel/detect`: Запуск детекции аномалий многоуровневой системой
- `GET /api/multilevel/available-detectors`: Получение списка доступных типов детекторов

### Работа с пагинацией

Для работы с пагинированными данными в приложении используется следующий подход:

1. API запрос через сервис `getAnomalies()` возвращает объект с полями `total` и `items`
2. Компоненты UI используют `total` для отображения общего количества записей и настройки пагинации
3. Данные из массива `items` отображаются в компонентах таблицы или карточек

## Установка и запуск

1. Установка зависимостей:
```bash
npm install
```

2. Запуск в режиме разработки:
```bash
npm run dev
```

3. Сборка для production:
```bash
npm run build
```

## Конфигурация

- **API URL**: Базовый URL API настраивается через переменную окружения `VITE_API_BASE_URL` или принимает значение по умолчанию `/api`
- **Тема**: Настройки темы Material UI находятся в директории `src/theme/`
